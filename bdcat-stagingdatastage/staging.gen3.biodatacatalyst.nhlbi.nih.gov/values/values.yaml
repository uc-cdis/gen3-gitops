access-backend:
  enabled: true
  image:
    repository: 707767160287.dkr.ecr.us-east-1.amazonaws.com/gen3/access-backend
    tag: '2025.09'
  externalSecrets:
    accessBackendG3auto: stagingdatastage-access-backend-g3auto
    dbcreds: stagingdatastage-access-backend-dbcreds
  serviceAccount:
    annotations:
      eks.amazonaws.com/role-arn: arn:aws:iam::895962626746:role/bdcatprod--bdcat-stagingdatastage--access-backend-sa
arborist:
  replicaCount: 4
  autoscaling:
    enabled: false
    maxReplicas: 4
    minReplicas: 2
    targetCPUUtilizationPercentage: 40
  enabled: true
  image:
    repository: 707767160287.dkr.ecr.us-east-1.amazonaws.com/gen3/arborist
    tag: '2025.09'
audit:
  enabled: true
  externalSecrets:
    auditG3auto: stagingdatastage-audit-g3auto
  image:
    repository: 707767160287.dkr.ecr.us-east-1.amazonaws.com/gen3/audit-service
    tag: '2025.09'
  serviceAccount:
    annotations:
      eks.amazonaws.com/role-arn: arn:aws:iam::895962626746:role/stagingdatastage--stagingdatastage-helm--audit-sqs-receiver
aws-es-proxy:
  enabled: true
  esEndpoint: vpc-stagingdatastage-gen3-2-fkiriymtypyt4i7s4rxq5kpkpy.us-east-1.es.amazonaws.com
  image:
    repository: quay.io/cdis/aws-es-proxy
    tag: v1.3.1
awshelper:
  enabled: true
  image:
    repository: 707767160287.dkr.ecr.us-east-1.amazonaws.com/gen3/awshelper
    tag: '2025.09'
dashboard:
  dashboardConfig:
    bucket: dashboard-895962626746-stagingdatastage-gen3
    prefix: staging.gen3.biodatacatalyst.nhlbi.nih.gov
  serviceAccount:
    annotations:
      eks.amazonaws.com/role-arn: arn:aws:iam::895962626746:role/stagingdatastage--stagingdatastage-helm--dashboard-access
etl:
  esEndpoint: elasticsearch
  etlMapping:
    mappings:
      - aggregated_props:
          - fn: set
            name: annotated_sex
            path: demographics
            src: annotated_sex
          - fn: set
            name: race
            path: demographics
            src: race
          - fn: set
            name: ethnicity
            path: demographics
            src: ethnicity
          - fn: count
            name: _samples_count
            path: samples
          - fn: count
            name: _aliquots_count
            path: samples.aliquots
          - fn: count
            name: _read_groups_count
            path: samples.aliquots.read_groups
          - fn: count
            name: _submitted_unaligned_reads_files_count
            path: samples.aliquots.read_groups.submitted_unaligned_reads_files
          - fn: count
            name: _submitted_aligned_reads_files_count
            path: samples.aliquots.read_groups.submitted_aligned_reads_files
          - fn: count
            name: _simple_germline_variations_count
            path: samples.aliquots.read_groups.simple_germline_variations
          - fn: set
            name: current_smoker_baseline
            path: exposures
            src: current_smoker_baseline
          - fn: set
            name: ever_smoker_baseline
            path: exposures
            src: ever_smoker_baseline
        doc_type: subject
        flatten_props:
          - path: demographics
            props:
              - name: age_at_index
              - name: hispanic_subgroup
              - name: subcohort
              - name: weight_baseline
              - name: bmi_baseline
              - name: height_baseline
          - path: medical_histories
            props:
              - name: diabetes
              - name: hypertension
              - name: cerebrovascular_disease
              - name: chronic_respiratory_disease
              - name: coronary_artery_disease
              - name: asthma
              - name: cabg_presence
              - name: copd
              - name: emphysema
              - name: heart_failure
              - name: myocardial_infarction
              - name: stroke
              - name: cac_score
              - name: cac_volume
              - name: carotid_plaque
              - name: carotid_stenosis
              - name: cimt_1
              - name: cimt_2
              - name: vte_case_status
              - name: vte_followup_start_age
              - name: vte_prior_history
          - path: medication_records
            props:
              - name: hypertension_meds
              - name: antihypertensive_meds
              - name: fasting_lipids
              - name: lipid_lowering_medication
          - path: lab_results
            props:
              - name: lymphocyte_ncnc_bld
              - name: mch_entmass_rbc
              - name: mcv_entvol_rbc
              - name: mchc_mcnc_rbc
              - name: monocyte_ncnc_bld
              - name: neutrophil_ncnc_bld
              - name: pmv_entvol_bld
              - name: rbc_ncnc_bld
              - name: rdw_ratio_rbc
              - name: hemoglobin_mcnc_bld
              - name: platelet_ncnc_bld
              - name: hematocrit_vfr_bld
              - name: wbc_ncnc_bld
              - name: basophil_ncnc_bld
              - name: eosinophil_ncnc_bld
              - name: unit_triglycerides
              - name: hdl
              - name: ldl
              - name: triglycerides
              - name: total_cholesterol
        joining_props:
          - index: file
            join_on: _subject_id
            props:
              - fn: set
                name: data_format
                src: data_format
              - fn: set
                name: data_type
                src: data_type
              - fn: count
                name: file_count
                src: _file_id
        name: staging.gen3.biodatacatalyst.nhlbi.nih.gov_subject
        parent_props:
          - path: studies[studies_submitter_id:submitter_id].projects[code]
          - path: studies[studies_submitter_id:submitter_id].projects[code].programs[programs_name:name]
        props:
          - name: submitter_id
          - name: project_id
          - name: consent_codes
          - name: geographic_site
        root: subject
        type: aggregator
      - category: data_file
        doc_type: file
        injecting_props:
          program:
            props:
              - fn: set
                name: programs_name
                src: name
          subject:
            props:
              - fn: set
                name: _subject_id
                src: id
              - name: project_id
        name: staging.gen3.biodatacatalyst.nhlbi.nih.gov_file
        props:
          - name: object_id
          - name: md5sum
          - name: file_name
          - name: file_size
          - name: data_category
          - name: data_format
          - name: data_type
          - name: state
          - name: callset
          - name: bucket_path
          - name: source_node
        root: None
        type: collector
  image:
    tube:
      tag: '2025.09'
    spark:
      tag: '2025.09'
fence:
  serviceAccount:
    annotations:
      eks.amazonaws.com/role-arn: arn:aws:iam::895962626746:role/stagingdatastage--stagingdatastage-helm--audit-sqs-sender
  replicaCount: 4
  autoscaling:
    enabled: false
    maxReplicas: 15
    minReplicas: 5
    targetCPUUtilizationPercentage: 40
  enabled: true
  externalSecrets:
    createK8sGoogleAppSecrets: false
    fenceConfig: stagingdatastage-fence-config
    fenceGoogleAppCredsSecret: stagingdatastage-fence-google-app-creds
    fenceGoogleStorageCredsSecret: stagingdatastage-fence-google-storage-creds
    fenceJwtKeys: stagingdatastage-fence-jwt
  image:
    repository: 707767160287.dkr.ecr.us-east-1.amazonaws.com/gen3/fence
    tag: '12.1.0'
  FENCE_CONFIG:
    ENABLE_VISA_UPDATE_CRON: true
  FENCE_CONFIG_PUBLIC:
    PRIVACY_POLICY_URL: https://biodatacatalyst.nhlbi.nih.gov/privacy/
  usersync:
    usersync: true
    syncFromDbgap: true
    userYamlS3Path: s3://cdis-gen3-users/stagingdatastage/user.yaml
    sshKnownHosts: |
      # sftp-private.ncbi.nlm.nih.gov:22 SSH-2.0-FTP Server ready.
      # sftp-private.ncbi.nlm.nih.gov:22 SSH-2.0-FTP Server ready.
      sftp-private.ncbi.nlm.nih.gov ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCjEuJc/1pAQxGxwuk8s/1u7tDq2PiOqutAXNjPOl0BkOiJJnUa6gdRx5WcVd6HApPrw7RUvUXraOmc82Zlzeno6DkzTjLk3ztuRs1hNF3KKx044AxDC1Jew6pK96At3kAvStfamNbY8URB9tj0SF3rFQxLrWo8WfhFr9AU4SuY5S0A2a/njucmTim3vDRPbBFO7Dlz2dxzeKPBdUDB/NvmdPWHxkviXkqUby/QzjglAQTts5lNEMH8qaRcU/dnWYRKvY17RHGu9/gNf8Z9DvBg8TbU7Ek3MT5A9F3nw1ZcZe7M8L7JwIKgQUl1gzOBHFfC248YES9REQffLYPWOCy9
      # sftp-private.ncbi.nlm.nih.gov:22 SSH-2.0-FTP Server ready.
      sftp-private.ncbi.nlm.nih.gov ecdsa-sha2-nistp521 AAAAE2VjZHNhLXNoYTItbmlzdHA1MjEAAAAIbmlzdHA1MjEAAACFBAFM24A4pG3U+8HzCvEkm9SiEWHOAtQr/DFZd3bf7VYDCcg2FPpUvGRsiDSuzhzBo+eG00d6/6y8NCypWwjiMi1rYgBOh9YA0w/ruutXYMUUVzw361lTgjOBOZ/dt3gKkNgShwDd0e1hnjYk/E7jYc2YJv67ZFy9GzXCWR55LhS/7fGQ5w==
      # sftp-private.ncbi.nlm.nih.gov:22 SSH-2.0-FTP Server ready.
      # sftp-private.ncbi.nlm.nih.gov:22 SSH-2.0-FTP Server ready.

fluentd:
  enabled: true
  image:
    repository: fluent/fluentd-kubernetes-daemonset
    tag: v1.15.3-debian-cloudwatch-1.0
frontend-framework:
  enabled: true
  image:
    repository: 707767160287.dkr.ecr.us-east-1.amazonaws.com/gen3/bdc-data-commons
    tag: main
gen3-user-data-library:
  enabled: true
  image:
    repository: 707767160287.dkr.ecr.us-east-1.amazonaws.com/gen3/gen3-user-data-library
    tag: '2025.09'
  externalSecrets:
    dbcreds: stagingdatastage-gen3userdatalibrary-creds
    gen3UserDataLibraryG3auto: stagingdatastage-gen3userdatalibrary-g3auto
global:
  pdb: true
  aws:
    account: '895962626746'
    awsEsProxyRole: stagingdatastage--stagingdatastage-helm--es-access
    enabled: true
    hatchery_role: stagingdatastage--stagingdatastage-helm--hatchery-sa
    secretStoreServiceAccount:
      enabled: true
      roleArn: arn:aws:iam::895962626746:role/stagingdatastage-external-secrets-sa
    wafv2:
      # -- (bool) Set to true if using AWS WAFv2
      enabled: true
      # -- (string) ARN for the WAFv2 ACL.
      wafAclArn: "arn:aws:wafv2:us-east-1:895962626746:regional/webacl/stagingdatastage-waf/5b4cb3ca-64af-4c69-a509-be3895a83b5d"
  dev: false
  dictionaryUrl: https://s3.amazonaws.com/dictionary-artifacts/gtexdictionary/4.6.5/schema.json
  dispatcherJobNum: '10'
  environment: stagingdatastage
  externalSecrets:
    deploy: true
    createSlackWebhookSecret: true
    slackWebhookSecretName: stagingdatastage-slack-webhook
  frontendRoot: portal
  hostname: staging.gen3.biodatacatalyst.nhlbi.nih.gov
  publicDataSets: true
  manifestGlobalExtraValues:
    kube_bucket: kube-stageprod-gen3
    logs_bucket: logs-stageprod-gen3
  tierAccessLevel: regular
  tierAccessLimit: 50
  fenceURL: https://staging.gen3.biodatacatalyst.nhlbi.nih.gov/user
  portalApp: gitops
  postgres:
    dbCreate: false
  revproxyArn: arn:aws:acm:us-east-1:895962626746:certificate/1876fa51-031e-4aa9-ab95-7da182a52c7f
guppy:
  authFilterField: auth_resource_path
  replicaCount: 4
  autoscaling:
    enabled: false
    maxReplicas: 4
    minReplicas: 2
    targetCPUUtilizationPercentage: 40
  configIndex: staging.gen3.biodatacatalyst.nhlbi.nih.gov_array-config
  enabled: true
  esEndpoint: http://elasticsearch:9200
  image:
    repository: 707767160287.dkr.ecr.us-east-1.amazonaws.com/gen3/guppy
    tag: '2025.09'
  indices:
    - index: staging.gen3.biodatacatalyst.nhlbi.nih.gov_subject
      type: subject
    - index: staging.gen3.biodatacatalyst.nhlbi.nih.gov_file
      type: file
hatchery:
  json: |-
    {
      "user-namespace": "jupyter-pods",
      "sub-dir": "/lw-workspace",
      "user-volume-size": "10Gi",
      "sidecar": {
        "cpu-limit": "1.0",
        "memory-limit": "256Mi",
        "image": "707767160287.dkr.ecr.us-east-1.amazonaws.com/gen3/gen3fuse-sidecar:2025.06",
        "env": {
          "NAMESPACE": "default",
          "HOSTNAME": "staging.gen3.biodatacatalyst.nhlbi.nih.gov"
        },
        "args": [],
        "command": [
          "/bin/bash",
          "/sidecarDockerrun.sh"
        ],
        "lifecycle-pre-stop": [
          "su",
          "-c",
          "echo test",
          "-s",
          "/bin/sh",
          "root"
        ]
      },
      "containers": [
        {
          "target-port": 8787,
          "cpu-limit": "1.0",
          "memory-limit": "512Mi",
          "name": "R Studio",
          "image": "heliumdatastage/rstudio-server:1",
          "env": {
            "DISABLE_AUTH": "true"
          },
          "args": [],
          "path-rewrite": "/",
          "use-tls": "false",
          "ready-probe": "/"
        },
        {
          "target-port": 8888,
          "cpu-limit": "1.0",
          "memory-limit": "512Mi",
          "name": "Jupyter Notebook Bio Python",
          "image": "quay.io/cdis/jupyter-notebook:jupyter-java-1.1",
          "env": {},
          "args": [
            "--NotebookApp.base_url=/lw-workspace/proxy/",
            "--NotebookApp.password=''",
            "--NotebookApp.token=''"
          ],
          "command": [
            "start-notebook.sh"
          ],
          "path-rewrite": "/lw-workspace/proxy/",
          "use-tls": "false",
          "ready-probe": "/lw-workspace/proxy/",
          "lifecycle-post-start": [
            "/bin/sh",
            "-c",
            "export IAM=`whoami`; rm -rf /home/$IAM/pd/dockerHome; ln -s $(pwd) /home/$IAM/pd/dockerHome; mkdir -p /home/$IAM/.jupyter/custom; echo \"define(['base/js/namespace'], function(Jupyter){Jupyter._target = '_self';})\" >/home/$IAM/.jupyter/custom/custom.js; ln -s /data /home/$IAM/pd/; true"
          ],
          "user-uid": 1000,
          "fs-gid": 100,
          "user-volume-location": "/home/jovyan/pd"
        },
        {
          "target-port": 8888,
          "cpu-limit": "4.0",
          "memory-limit": "15512Mi",
          "name": "Jupyter Notebook Power Python",
          "image": "quay.io/cdis/jupyter-notebook:jupyter-java-1.1",
          "env": {},
          "args": [
            "--NotebookApp.base_url=/lw-workspace/proxy/",
            "--NotebookApp.password=''",
            "--NotebookApp.token=''"
          ],
          "command": [
            "start-notebook.sh"
          ],
          "path-rewrite": "/lw-workspace/proxy/",
          "use-tls": "false",
          "ready-probe": "/lw-workspace/proxy/",
          "lifecycle-post-start": [
            "/bin/sh",
            "-c",
            "export IAM=`whoami`; rm -rf /home/$IAM/pd/dockerHome; ln -s $(pwd) /home/$IAM/pd/dockerHome; mkdir -p /home/$IAM/.jupyter/custom; echo \"define(['base/js/namespace'], function(Jupyter){Jupyter._target = '_self';})\" >/home/$IAM/.jupyter/custom/custom.js; ln -s /data /home/$IAM/pd/; true"
          ],
          "user-uid": 1000,
          "fs-gid": 100,
          "user-volume-location": "/home/jovyan/pd"
        },
        {
          "target-port": 8888,
          "cpu-limit": "1.0",
          "memory-limit": "8096Mi",
          "name": "Helium Autoencoder Demo",
          "image": "quay.io/cdis/auntoencoder-copd-demo:latest",
          "env": {},
          "args": [
            "--NotebookApp.base_url=/lw-workspace/proxy/",
            "--NotebookApp.password=''",
            "--NotebookApp.token=''"
          ],
          "command": [
            "start-notebook.sh"
          ],
          "path-rewrite": "/lw-workspace/proxy/",
          "use-tls": "false",
          "ready-probe": "/lw-workspace/proxy/",
          "lifecycle-post-start": [
            "/bin/sh",
            "-c",
            "export IAM=`whoami`; rm -rf /home/$IAM/pd/dockerHome; ln -s $(pwd) /home/$IAM/pd/dockerHome; mkdir -p /home/$IAM/.jupyter/custom; echo \"define(['base/js/namespace'], function(Jupyter){Jupyter._target = '_self';})\" >/home/$IAM/.jupyter/custom/custom.js; ln -s /data /home/$IAM/pd/; true"
          ],
          "user-uid": 1000,
          "fs-gid": 100
        },
        {
          "target-port": 8888,
          "cpu-limit": "1.0",
          "memory-limit": "8096Mi",
          "name": "Helium Tensorflow-Pytorch",
          "image": "heliumdatastage/tensorflow-pytorch-ext:1",
          "env": {},
          "args": [
            "--NotebookApp.base_url=/lw-workspace/proxy/",
            "--NotebookApp.password=''",
            "--NotebookApp.token=''"
          ],
          "command": [
            "start-notebook.sh"
          ],
          "path-rewrite": "/lw-workspace/proxy/",
          "use-tls": "false",
          "ready-probe": "/lw-workspace/proxy/",
          "lifecycle-post-start": [
            "/bin/sh",
            "-c",
            "export IAM=`whoami`; rm -rf /home/$IAM/pd/dockerHome; ln -s $(pwd) /home/$IAM/pd/dockerHome; mkdir -p /home/$IAM/.jupyter/custom; echo \"define(['base/js/namespace'], function(Jupyter){Jupyter._target = '_self';})\" >/home/$IAM/.jupyter/custom/custom.js; ln -s /data /home/$IAM/pd/; true"
          ],
          "user-uid": 1000,
          "fs-gid": 100
        },
        {
          "target-port": 8888,
          "cpu-limit": "1.0",
          "memory-limit": "8096Mi",
          "name": "Helium CIP Demo",
          "image": "heliumdatastage/jup-cip:v1",
          "env": {},
          "args": [
            "--NotebookApp.base_url=/lw-workspace/proxy/",
            "--NotebookApp.password=''",
            "--NotebookApp.token=''"
          ],
          "command": [
            "start-notebook.sh"
          ],
          "path-rewrite": "/lw-workspace/proxy/",
          "use-tls": "false",
          "ready-probe": "/lw-workspace/proxy/",
          "lifecycle-post-start": [
            "/bin/sh",
            "-c",
            "export IAM=`whoami`; rm -rf /home/$IAM/pd/dockerHome; ln -s $(pwd) /home/$IAM/pd/dockerHome; mkdir -p /home/$IAM/.jupyter/custom; echo \"define(['base/js/namespace'], function(Jupyter){Jupyter._target = '_self';})\" >/home/$IAM/.jupyter/custom/custom.js; ln -s /data /home/$IAM/pd/; true"
          ],
          "user-uid": 1000,
          "fs-gid": 100
        }
      ]
    }
  image:
    tag: '2025.09'
indexd:
  defaultPrefix: dg.4503/
  replicaCount: 4
  autoscaling:
    enabled: false
    maxReplicas: 8
    minReplicas: 4
    targetCPUUtilizationPercentage: 40
  enabled: true
  externalSecrets:
    serviceCreds: stagingdatastage-indexd-service-creds
  image:
    repository: 707767160287.dkr.ecr.us-east-1.amazonaws.com/gen3/indexd
    tag: '2025.09'
manifestservice:
  enabled: false
  externalSecrets:
    manifestserviceG3auto: stagingdatastage-manifestservice-g3auto
  serviceAccount:
    annotations:
      eks.amazonaws.com/role-arn: arn:aws:iam::562749638216:role/stagingdatastage--stagingdatastage-helm--manifest-service-sa
metadata:
  replicaCount: 4
  autoscaling:
    enabled: false
    maxReplicas: 5
    minReplicas: 2
    targetCPUUtilizationPercentage: 40
  enabled: true
  esEndpoint: http://elasticsearch:9200
  externalSecrets:
    metadataG3auto: stagingdatastage-metadata-g3auto
  image:
    repository: 707767160287.dkr.ecr.us-east-1.amazonaws.com/gen3/metadata-service
    tag: '2025.09'
metadata-delete-expired-objects:
  enabled: true
  image:
    repository: quay.io/cdis/metadata-delete-expired-objects
    tag: '2025.06'
peregrine:
  replicaCount: 4
  autoscaling:
    enabled: false
    maxReplicas: 4
    minReplicas: 2
    targetCPUUtilizationPercentage: 40
  enabled: true
  image:
    repository: 707767160287.dkr.ecr.us-east-1.amazonaws.com/gen3/peregrine
    tag: '2025.09'
portal:
  replicaCount: 4
  autoscaling:
    enabled: false
    maxReplicas: 4
    minReplicas: 2
    targetCPUUtilizationPercentage: 40
  enabled: true
  customConfig:
    enabled: true
    dir: "bdcat-stagingdatastage/staging.gen3.biodatacatalyst.nhlbi.nih.gov/values/portal/"
    repo: https://github.com/uc-cdis/gen3-gitops.git
    branch: master
  image:
    repository: 707767160287.dkr.ecr.us-east-1.amazonaws.com/gen3/data-portal
    tag: 'feature_data_library'
    pullPolicy: 'Always'
revproxy:
  replicaCount: 4
  autoscaling:
    enabled: false
    maxReplicas: 10
    minReplicas: 4
    targetCPUUtilizationPercentage: 40
  enabled: true
  image:
    repository: 707767160287.dkr.ecr.us-east-1.amazonaws.com/gen3/nginx
    tag: '2025.09'
  ingress:
    aws:
      group: stagingdatastage
sheepdog:
  replicaCount: 4
  autoscaling:
    enabled: false
    maxReplicas: 4
    minReplicas: 2
    targetCPUUtilizationPercentage: 40
  enabled: true
  image:
    repository: 707767160287.dkr.ecr.us-east-1.amazonaws.com/gen3/sheepdog
    tag: '2025.09'
sower:
  enabled: true
  externalSecrets:
    createK8sPelicanServiceSecret: false
    pelicanserviceG3auto: stagingdatastage-pelicanservice-g3auto
    sowerjobsG3auto: stagingdatastage-sower-jobs-g3auto
    createK8sSowerJobsSecret: false
  image:
    repository: 707767160287.dkr.ecr.us-east-1.amazonaws.com/gen3/sower
    tag: '2025.09'
  sowerConfig:
    - action: export
      container:
        cpu-limit: '1'
        env:
          - name: DICTIONARY_URL
            valueFrom:
              configMapKeyRef:
                key: dictionary_url
                name: manifest-global
          - name: GEN3_HOSTNAME
            valueFrom:
              configMapKeyRef:
                key: hostname
                name: manifest-global
          - name: ROOT_NODE
            value: subject
          - name: DB_HOST
            valueFrom:
              secretKeyRef:
                name: sheepdog-dbcreds
                key: host
          - name: DB_DATABASE
            valueFrom:
              secretKeyRef:
                name: sheepdog-dbcreds
                key: database
          - name: DB_USER
            valueFrom:
              secretKeyRef:
                name: sheepdog-dbcreds
                key: username
          - name: DB_PASS
            valueFrom:
              secretKeyRef:
                name: sheepdog-dbcreds
                key: password
          - name: SHEEPDOG
            valueFrom:
              secretKeyRef:
                name: indexd-service-creds
                key: sheepdog
        image: 707767160287.dkr.ecr.us-east-1.amazonaws.com/gen3/pelican-export:2025.09
        memory-limit: 12Gi
        name: job-task
        pull_policy: Always
        volumeMounts:
          - mountPath: /pelican-creds.json
            name: pelican-creds-volume
            readOnly: true
            subPath: config.json
      name: pelican-export
      restart_policy: Never
      serviceAccountName: default
      volumes:
        - name: pelican-creds-volume
          secret:
            secretName: pelicanservice-g3auto
    - action: export-files
      container:
        cpu-limit: '1'
        env:
          - name: DICTIONARY_URL
            valueFrom:
              configMapKeyRef:
                key: dictionary_url
                name: manifest-global
          - name: GEN3_HOSTNAME
            valueFrom:
              configMapKeyRef:
                key: hostname
                name: manifest-global
          - name: ROOT_NODE
            value: file
          - name: EXTRA_NODES
            value: ''
          - name: DB_HOST
            valueFrom:
              secretKeyRef:
                name: sheepdog-dbcreds
                key: host
          - name: DB_DATABASE
            valueFrom:
              secretKeyRef:
                name: sheepdog-dbcreds
                key: database
          - name: DB_USER
            valueFrom:
              secretKeyRef:
                name: sheepdog-dbcreds
                key: username
          - name: DB_PASS
            valueFrom:
              secretKeyRef:
                name: sheepdog-dbcreds
                key: password
          - name: SHEEPDOG
            valueFrom:
              secretKeyRef:
                name: indexd-service-creds
                key: sheepdog
        image: 707767160287.dkr.ecr.us-east-1.amazonaws.com/gen3/pelican-export:2025.09
        memory-limit: 12Gi
        name: job-task
        pull_policy: Always
        volumeMounts:
          - mountPath: /pelican-creds.json
            name: pelican-creds-volume
            readOnly: true
            subPath: config.json
      name: pelican-export-files
      restart_policy: Never
      volumes:
        - name: pelican-creds-volume
          secret:
            secretName: pelicanservice-g3auto
    - action: index-object-manifest
      activeDeadlineSeconds: 86400
      container:
        cpu-limit: '1'
        env:
          - name: GEN3_HOSTNAME
            valueFrom:
              configMapKeyRef:
                key: hostname
                name: manifest-global
        image: 707767160287.dkr.ecr.us-east-1.amazonaws.com/gen3/manifest-indexing:2025.09
        memory-limit: 1Gi
        name: job-task
        pull_policy: Always
        volumeMounts:
          - mountPath: /creds.json
            name: sower-jobs-creds-volume
            readOnly: true
            subPath: creds.json
      name: manifest-indexing
      restart_policy: Never
      serviceAccountName: default
      volumes:
        - name: sower-jobs-creds-volume
          secret:
            secretName: sower-jobs-g3auto
    - action: download-indexd-manifest
      activeDeadlineSeconds: 86400
      container:
        cpu-limit: '1'
        env:
          - name: GEN3_HOSTNAME
            valueFrom:
              configMapKeyRef:
                key: hostname
                name: manifest-global
        image: 707767160287.dkr.ecr.us-east-1.amazonaws.com/gen3/download-indexd-manifest:2025.09
        memory-limit: 1Gi
        name: job-task
        pull_policy: Always
        volumeMounts:
          - mountPath: /creds.json
            name: sower-jobs-creds-volume
            readOnly: true
            subPath: creds.json
      name: indexd-manifest
      restart_policy: Never
      serviceAccountName: jobs-preprod-gen3-biodatacatalyst-nhlbi-nih-gov
      volumes:
        - name: sower-jobs-creds-volume
          secret:
            secretName: sower-jobs-g3auto
spark:
  enabled: true
  image:
    repository: 707767160287.dkr.ecr.us-east-1.amazonaws.com/gen3/gen3-spark
    tag: '2025.06'
ssjdispatcher:
  enabled: true
  externalSecrets:
    credsFile: stagingdatastage-ssjdispatcher-creds
  image:
    repository: 707767160287.dkr.ecr.us-east-1.amazonaws.com/gen3/ssjdispatcher
    tag: '2025.09'
  indexing: quay.io/cdis/indexs3client:2025.09
tube:
  enabled: true
  image:
    repository: 707767160287.dkr.ecr.us-east-1.amazonaws.com/gen3/tube
    tag: '2025.06'
wts:
  enabled: false
mutatingWebhook:
  enabled: false
