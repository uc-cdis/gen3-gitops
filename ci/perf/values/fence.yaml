fence:
  externalSecrets:
    createK8sJwtKeysSecret: false
    fenceJwtKeys: ci-fence-jwt
    fenceGoogleAppCredsSecret: ci-fence-google-app-creds-secret
    fenceGoogleStorageCredsSecret: ci-fence-google-storage-creds-secret
    createK8sGoogleAppSecrets: false
    fenceConfig: ci-fence-config-priv
    fenceSshKeys: ci-fence-ssh-keys
  fenceDeleteExpiredClients:
    schedule: 0 0 * * *
  replicaCount: 2
  autoscaling:
    enabled: true
  image:
    repository: quay.io/cdis/fence
    pullPolicy: IfNotPresent
    tag: '2025.09'
  usersync:
    usersync: true
    userYamlS3Path: s3://cdis-gen3-users/ci/user.yaml
    schedule: 0 0 1 1 1
    syncFromDbgap: true
  FENCE_CONFIG_PUBLIC:
    GOOGLE_GROUP_PREFIX: null
    GOOGLE_SERVICE_ACCOUNT_PREFIX: null
    BASE_URL: https://HOSTNAME/user
    APP_NAME: Gen3 Data Commons
    DEBUG: false
    MOCK_AUTH: false
    MOCK_GOOGLE_AUTH: true
    DEV_LOGIN_COOKIE_NAME: dev_login
    MOCK_STORAGE: false
    AUTHLIB_INSECURE_TRANSPORT: true
    ENABLE_PROMETHEUS_METRICS: false
    SESSION_COOKIE_SECURE: true
    ENABLE_CSRF_PROTECTION: true
    WTF_CSRF_SECRET_KEY: '{{ENCRYPTION_KEY}}'
    ENABLE_DB_MIGRATION: true
    CLIENT_ALLOWED_SCOPES:
      - openid
      - user
      - data
      - google_credentials
      - google_service_account
      - google_link
      - ga4gh_passport_v1
    USER_ALLOWED_SCOPES:
      - fence
      - openid
      - user
      - data
      - admin
      - google_credentials
      - google_service_account
      - google_link
      - ga4gh_passport_v1
    SESSION_ALLOWED_SCOPES:
      - openid
      - user
      - credentials
      - data
      - admin
      - google_credentials
      - google_service_account
      - google_link
      - ga4gh_passport_v1
    LOGIN_OPTIONS:
      - name: Login from Google
        idp: google
      - name: ORCID Login
        idp: fence
        fence_idp: orcid
      - name: Login from RAS
        idp: ras
    DEFAULT_LOGIN_IDP: google
    DEFAULT_LOGIN_URL: '{{BASE_URL}}/login/google'
    LOGIN_REDIRECT_WHITELIST:
      - .
      - /login
    ENABLED_IDENTITY_PROVIDERS:
      default: google
      providers:
        google:
          name: Login from Google
    OAUTH2_JWT_ALG: RS256
    OAUTH2_JWT_ENABLED: true
    OAUTH2_JWT_ISS: '{{BASE_URL}}'
    OAUTH2_PROVIDER_ERROR_URI: /api/oauth2/errors
    APPLICATION_ROOT: /user
    ACCESS_TOKEN_COOKIE_NAME: access_token
    SESSION_COOKIE_NAME: fence
    SESSION_COOKIE_DOMAIN: null
    OAUTH2_TOKEN_EXPIRES_IN:
      authorization_code: 1200
      implicit: 1200
    ACCESS_TOKEN_EXPIRES_IN: 1200
    REFRESH_TOKEN_EXPIRES_IN: 2592000
    SESSION_TIMEOUT: 1800
    SESSION_LIFETIME: 28800
    GOOGLE_SERVICE_ACCOUNT_KEY_FOR_URL_SIGNING_EXPIRES_IN: 2592000
    GOOGLE_USER_SERVICE_ACCOUNT_ACCESS_EXPIRES_IN: 604800
    GOOGLE_ACCOUNT_ACCESS_EXPIRES_IN: 86400
    MAX_PRESIGNED_URL_TTL: 3600
    MAX_API_KEY_TTL: 2592000
    MAX_ACCESS_TOKEN_TTL: 3600
    TOKEN_PROJECTS_CUTOFF: 10
    RENEW_ACCESS_TOKEN_BEFORE_EXPIRATION: false
    GEN3_PASSPORT_EXPIRES_IN: 43200
    PRIVACY_POLICY_URL: null
    OVERRIDE_NGINX_RATE_LIMIT: 18
    SUPPORT_EMAIL_FOR_ERRORS: null
    SHIBBOLETH_HEADER: persistent_id
    SSO_URL: https://auth.nih.gov/affwebservices/public/saml2sso?SPID={{BASE_URL}}/shibboleth&RelayState=
    ITRUST_GLOBAL_LOGOUT: https://auth.nih.gov/siteminderagent/smlogout.asp?mode=nih&AppReturnUrl=
    DBGAP_ACCESSION_WITH_CONSENT_REGEX: (?P<phsid>phs[0-9]+)(.(?P<version>v[0-9]+)){0,1}(.(?P<participant_set>p[0-9]+)){0,1}.(?P<consent>c[0-9]+)
    GOOGLE_BULK_UPDATES: true
    STORAGE_CREDENTIALS:
      google:
        backend: google
        google_project_id: dcf-integration
    S3_BUCKETS:
      cdis-presigned-url-test:
        region: us-east-1
        cred: cdistest
      gen3-helm-data-upload-bucket:
        region: us-east-1
        cred: cdistest
    DATA_UPLOAD_BUCKET: gen3-helm-data-upload-bucket
    HTTP_PROXY:
      host: cloud-proxy.internal.io
      port: 3128
    INDEXD: http://indexd-service
    INDEXD_USERNAME: fence
    INDEXD_PASSWORD: ''
    AZ_BLOB_CREDENTIALS: null
    AZ_BLOB_CONTAINER_URL: https://myfakeblob.blob.core.windows.net/my-fake-container/
    ARBORIST: http://arborist-service
    AUDIT_SERVICE: http://audit-service
    ENABLE_AUDIT_LOGS:
      presigned_url: true
      login: true
    PUSH_AUDIT_LOGS_CONFIG:
      type: aws_sqs
      aws_sqs_config:
        sqs_url: https://sqs.us-east-1.amazonaws.com/707767160287/audit-service-sqs
        region: us-east-1
        aws_cred: cdistest
    BILLING_PROJECT_FOR_SIGNED_URLS: null
    BILLING_PROJECT_FOR_SA_CREDS: null
    ENABLE_AUTOMATIC_BILLING_PERMISSION_SIGNED_URLS: false
    ENABLE_AUTOMATIC_BILLING_PERMISSION_SA_CREDS: false
    GUN_MAIL:
      datacommons.io:
        smtp_hostname: smtp.mailgun.org
        api_key: ''
        default_login: postmaster@mailgun.example.com
        api_url: https://api.mailgun.net/v3/mailgun.example.com
        smtp_password: ''
    EMAIL_SERVER: localhost
    SEND_FROM: example@gmail.com
    SEND_TO: example@gmail.com
    ALLOW_GOOGLE_LINKING: true
    WHITE_LISTED_GOOGLE_PARENT_ORGS: []
    REMOVE_SERVICE_ACCOUNT_EMAIL_NOTIFICATION:
      enable: false
      domain: example.com
      from: do-not-reply@example.com
      subject: User service account removal notification
      content: 'Service accounts were removed from access control data because some
        users or service accounts of GCP Project {} are not authorized to access the
        data sets associated to the service accounts, or do not adhere to the security
        policies.

        '
      admin:
        - admin@example.edu
    PROBLEM_USER_EMAIL_NOTIFICATION:
      domain: example.com
      from: do-not-reply@example.com
      subject: Account access error notification
      content: 'The Data Commons Framework utilizes dbGaP for data access authorization.
        Another member of a Google project you belong to ({}) is attempting to register
        a service account to the following additional datasets ({}). Please contact
        dbGaP to request access.

        '
      admin:
        - admin@example.edu
    GOOGLE_MANAGED_SERVICE_ACCOUNT_DOMAINS:
      - dataflow-service-producer-prod.iam.gserviceaccount.com
      - cloudbuild.gserviceaccount.com
      - cloud-ml.google.com.iam.gserviceaccount.com
      - container-engine-robot.iam.gserviceaccount.com
      - dataflow-service-producer-prod.iam.gserviceaccount.com
      - sourcerepo-service-accounts.iam.gserviceaccount.com
      - dataproc-accounts.iam.gserviceaccount.com
      - gae-api-prod.google.com.iam.gserviceaccount.com
      - genomics-api.google.com.iam.gserviceaccount.com
      - containerregistry.iam.gserviceaccount.com
      - container-analysis.iam.gserviceaccount.com
      - cloudservices.gserviceaccount.com
      - stackdriver-service.iam.gserviceaccount.com
      - appspot.gserviceaccount.com
      - partnercontent.gserviceaccount.com
      - trifacta-gcloud-prod.iam.gserviceaccount.com
      - gcf-admin-robot.iam.gserviceaccount.com
      - compute-system.iam.gserviceaccount.com
      - gcp-sa-websecurityscanner.iam.gserviceaccount.com
      - storage-transfer-service.iam.gserviceaccount.com
      - firebase-sa-management.iam.gserviceaccount.com
      - firebase-rules.iam.gserviceaccount.com
      - gcp-sa-cloudbuild.iam.gserviceaccount.com
      - gcp-sa-automl.iam.gserviceaccount.com
      - gcp-sa-datalabeling.iam.gserviceaccount.com
      - gcp-sa-cloudscheduler.iam.gserviceaccount.com
    ALLOWED_USER_SERVICE_ACCOUNT_DOMAINS:
      - developer.gserviceaccount.com
      - appspot.gserviceaccount.com
      - iam.gserviceaccount.com
    DREAM_CHALLENGE_TEAM: DREAM
    DREAM_CHALLENGE_GROUP: DREAM
    SYNAPSE_URI: https://repo-prod.prod.sagebase.org/auth/v1
    SYNAPSE_JWKS_URI: null
    SYNAPSE_DISCOVERY_URL: null
    SYNAPSE_AUTHZ_TTL: 86400
    MAX_ROLE_SESSION_INCREASE: false
    ASSUME_ROLE_CACHE_SECONDS: 1800
    REGISTER_USERS_ON: true
    REGISTERED_USERS_GROUP: ''
    RAS_REFRESH_EXPIRATION: 1296000
    GA4GH_VISA_ISSUER_ALLOWLIST:
      - '{{BASE_URL}}'
      - https://sts.nih.gov
      - https://stsstg.nih.gov
    SERVICE_ACCOUNT_LIMIT: 6
    GLOBAL_PARSE_VISAS_ON_LOGIN: false
    USERSYNC:
      sync_from_visas: false
      fallback_to_dbgap_sftp: false
      visa_types:
        ras:
          - https://ras.nih.gov/visas/v1
          - https://ras.nih.gov/visas/v1.1
    RAS_USERINFO_ENDPOINT: /openid/connect/v1.1/userinfo
